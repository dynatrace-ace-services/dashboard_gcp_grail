{"version":13,"variables":[{"key":"gcp_project_id","type":"query","input":"timeseries sum=sum(cloud.gcp.cloudfunctions_googleapis_com.function.active_instances), by:{ gcp.project.id }\n| fields gcp.project.id, request_count=arraySum(sum)\n| sort request_count desc\n| fields gcp.project.id\n","multiple":true},{"key":"top","type":"csv","input":"5, 10, 20 , 50, 100, 500","multiple":false}],"tiles":{"0":{"type":"markdown","title":"","content":"## Usage"},"1":{"type":"markdown","title":"","content":"Active instances by Function"},"2":{"type":"data","title":"Active instances (max)","query":"timeseries active_instances=max(cloud.gcp.cloudfunctions_googleapis_com.function.active_instances), by: { function_name,`dt.entity.cloud:gcp:cloud_function` }, filter:in(gcp.project.id, $gcp_project_id)\n| sort arrayMax(active_instances) desc\n| limit toLong($top)","davis":{"enabled":false,"davisVisualization":{"isAvailable":true}},"visualization":"lineChart","visualizationSettings":{"thresholds":[{"id":"0","title":"","field":"active_instances","rules":[{"id":"0","label":"","comparator":"≥","color":"#7dc540"},{"id":"1","label":"","comparator":"≥","color":"#f5d30f"},{"id":"2","label":"","comparator":"≥","color":"#dc172a"}],"isEnabled":true}],"chartSettings":{"seriesOverrides":[],"gapPolicy":"gap","legend":{"hidden":false},"leftYAxisSettings":{"label":""},"categoricalBarChartSettings":{"categoryAxis":"function_name","categoryAxisLabel":"function_name","valueAxis":"interval","valueAxisLabel":"interval"},"fieldMapping":{"timestamp":"timeframe","leftAxisValues":["active_instances"],"leftAxisDimensions":["function_name","dt.entity.cloud:gcp:cloud_function"],"fields":[],"values":[]},"hiddenLegendFields":["dt.entity.cloud:gcp:cloud_function","active_instances"]},"singleValue":{"showLabel":true,"label":"","prefixIcon":"","recordField":"function_name","autoscale":true,"alignment":"center","colorThresholdTarget":"value"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"columnWidths":{}},"unitsOverrides":[{"identifier":"active_instances","unitCategory":"unspecified","baseUnit":"count","displayUnit":"","decimals":0,"suffix":"","delimiter":false,"added":0,"id":"active_instances"}],"histogram":{"dataMappings":[{"valueAxis":"interval","rangeAxis":""}]},"honeycomb":{"shape":"square"}}},"3":{"type":"data","title":"Active instances (max)","query":"timeseries max=max(cloud.gcp.cloudfunctions_googleapis_com.function.active_instances), by: { function_name }, filter:in(gcp.project.id, $gcp_project_id)\n| fields function_name, active_instances=arrayMax(max)\n| sort active_instances desc\n| limit toLong($top)","davis":{"enabled":false,"davisVisualization":{"isAvailable":true}},"visualization":"categoricalBarChart","visualizationSettings":{"thresholds":[{"id":"0","title":"","field":"active_instances","rules":[{"id":"0","label":"","comparator":"≥","color":"#7dc540"},{"id":"1","label":"","comparator":"≥","color":"#f5d30f"},{"id":"2","label":"","comparator":"≥","color":"#dc172a"}],"isEnabled":true}],"chartSettings":{"seriesOverrides":[],"gapPolicy":"gap","leftYAxisSettings":{"label":""},"categoricalBarChartSettings":{"categoryAxis":"function_name","categoryAxisLabel":"","valueAxis":"active_instances","valueAxisLabel":"","layout":"horizontal"}},"singleValue":{"showLabel":true,"label":"","prefixIcon":"","recordField":"function_name","autoscale":true,"alignment":"center","colorThresholdTarget":"value"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"columnWidths":{}},"unitsOverrides":[{"identifier":"active_instances","unitCategory":"unspecified","baseUnit":"count","displayUnit":"","decimals":0,"suffix":"","delimiter":false,"added":0,"id":"active_instances"}],"histogram":{"dataMappings":[{"valueAxis":"active_instances","rangeAxis":""}]},"honeycomb":{"shape":"square"}}},"4":{"type":"markdown","title":"","content":"Executions by Function"},"5":{"type":"data","title":"Active instances (max)","query":"timeseries max=max(cloud.gcp.cloudfunctions_googleapis_com.function.active_instances, rollup:max), by: { gcp.region, gcp.project.id }, filter:in(gcp.project.id, $gcp_project_id)\n| fields gcp.region, active_instances=arrayMax(max)\n| summarize instances_by_region=sum(active_instances), by:{gcp.region}\n| sort instances_by_region desc\n//| limit toLong($top)","davis":{"enabled":false,"davisVisualization":{"isAvailable":true}},"visualization":"donutChart","visualizationSettings":{"thresholds":[{"id":"0","title":"","field":"active_instances","rules":[{"id":"0","label":"","comparator":"≥","color":"#7dc540"},{"id":"1","label":"","comparator":"≥","color":"#f5d30f"},{"id":"2","label":"","comparator":"≥","color":"#dc172a"}],"isEnabled":true}],"chartSettings":{"seriesOverrides":[],"gapPolicy":"gap","legend":{"hidden":false,"position":"auto"},"leftYAxisSettings":{"label":""},"categoricalBarChartSettings":{"categoryAxis":"gcp.region","categoryAxisLabel":"gcp.region","valueAxis":"instances_by_region","valueAxisLabel":"instances_by_region","layout":"horizontal"},"circleChartSettings":{"valueType":"absolute","showTotalValue":true,"groupingThresholdType":"number-of-slices","groupingThresholdValue":10,"totalValueLabel":"all"}},"singleValue":{"showLabel":true,"label":"","prefixIcon":"","recordField":"function_name","autoscale":true,"alignment":"center","colorThresholdTarget":"value"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"columnWidths":{}},"unitsOverrides":[{"identifier":"active_instances","unitCategory":"unspecified","baseUnit":"count","displayUnit":"","decimals":0,"suffix":"","delimiter":false,"added":0,"id":"active_instances"}],"histogram":{"dataMappings":[{"valueAxis":"instances_by_region","rangeAxis":""}]},"honeycomb":{"shape":"square"}}},"6":{"type":"markdown","title":"","content":"Active instances by Region"},"7":{"type":"markdown","title":"","content":"Active instances by Project"},"8":{"type":"data","title":"Active instances (sum)","query":"timeseries max=max(cloud.gcp.cloudfunctions_googleapis_com.function.active_instances), by: { gcp.project.id }, filter:in(gcp.project.id, $gcp_project_id)\n| fields gcp.project.id, active_instances=arrayMax(max)\n| sort active_instances desc\n//| limit toLong($top)","davis":{"enabled":false,"davisVisualization":{"isAvailable":true}},"visualization":"donutChart","visualizationSettings":{"thresholds":[{"id":"0","title":"","field":"active_instances","rules":[{"id":"0","label":"","comparator":"≥","color":"#7dc540"},{"id":"1","label":"","comparator":"≥","color":"#f5d30f"},{"id":"2","label":"","comparator":"≥","color":"#dc172a"}],"isEnabled":true}],"chartSettings":{"seriesOverrides":[],"gapPolicy":"gap","legend":{"hidden":false,"position":"auto"},"leftYAxisSettings":{"label":""},"categoricalBarChartSettings":{"categoryAxis":"gcp.project.id","categoryAxisLabel":"gcp.project.id","valueAxis":"active_instances","valueAxisLabel":"active_instances","layout":"horizontal"},"circleChartSettings":{"valueType":"absolute","showTotalValue":true,"groupingThresholdType":"number-of-slices","groupingThresholdValue":10,"groupingName":null,"totalValueLabel":"all"}},"singleValue":{"showLabel":true,"label":"","prefixIcon":"","recordField":"function_name","autoscale":true,"alignment":"center","colorThresholdTarget":"value"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"columnWidths":{}},"unitsOverrides":[{"identifier":"active_instances","unitCategory":"unspecified","baseUnit":"count","displayUnit":"","decimals":0,"suffix":"","delimiter":false,"added":0,"id":"active_instances"}],"histogram":{"dataMappings":[{"valueAxis":"active_instances","rangeAxis":""}]},"honeycomb":{"shape":"square"}}},"10":{"type":"data","title":"Executions (sum)","query":"timeseries sum=sum(cloud.gcp.cloudfunctions_googleapis_com.function.execution_count), by: { function_name }, filter:in(gcp.project.id, $gcp_project_id)\n| fields function_name, execution_count=arraySum(sum)\n| sort execution_count desc\n| limit toLong($top)","davis":{"enabled":false,"davisVisualization":{"isAvailable":true}},"visualization":"categoricalBarChart","visualizationSettings":{"thresholds":[{"id":"0","title":"","field":"active_instances","rules":[{"id":"0","label":"","comparator":"≥","color":"#7dc540"},{"id":"1","label":"","comparator":"≥","color":"#f5d30f"},{"id":"2","label":"","comparator":"≥","color":"#dc172a"}],"isEnabled":true}],"chartSettings":{"seriesOverrides":[],"gapPolicy":"gap","leftYAxisSettings":{"label":""},"categoricalBarChartSettings":{"categoryAxis":"function_name","categoryAxisLabel":"","valueAxis":"execution_count","valueAxisLabel":"","layout":"horizontal"}},"singleValue":{"showLabel":true,"label":"","prefixIcon":"","recordField":"function_name","autoscale":true,"alignment":"center","colorThresholdTarget":"value"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"columnWidths":{}},"unitsOverrides":[{"identifier":"active_instances","unitCategory":"unspecified","baseUnit":"count","displayUnit":"","decimals":0,"suffix":"","delimiter":false,"added":0,"id":"active_instances"}],"histogram":{"dataMappings":[{"valueAxis":"execution_count","rangeAxis":""}]},"honeycomb":{"shape":"square"}}},"11":{"type":"data","title":"Executions (sum)","query":"timeseries execution_count=sum(cloud.gcp.cloudfunctions_googleapis_com.function.execution_count), by: { function_name,`dt.entity.cloud:gcp:cloud_function` }, filter:in(gcp.project.id, $gcp_project_id)\n| sort arraySum(execution_count) desc\n| limit toLong($top)","davis":{"enabled":false,"davisVisualization":{"isAvailable":true}},"visualization":"lineChart","visualizationSettings":{"thresholds":[{"id":"0","title":"","field":"active_instances","rules":[{"id":"0","label":"","comparator":"≥","color":"#7dc540"},{"id":"1","label":"","comparator":"≥","color":"#f5d30f"},{"id":"2","label":"","comparator":"≥","color":"#dc172a"}],"isEnabled":true}],"chartSettings":{"seriesOverrides":[],"gapPolicy":"gap","legend":{"hidden":false,"position":"auto"},"leftYAxisSettings":{"label":"","scale":"linear"},"categoricalBarChartSettings":{"categoryAxis":"function_name","categoryAxisLabel":"function_name","valueAxis":"interval","valueAxisLabel":"interval","layout":"horizontal"},"fieldMapping":{"timestamp":"timeframe","leftAxisValues":["execution_count"],"leftAxisDimensions":["function_name","dt.entity.cloud:gcp:cloud_function"],"fields":[],"values":[]},"hiddenLegendFields":["dt.entity.cloud:gcp:cloud_function","execution_count"]},"singleValue":{"showLabel":true,"label":"","prefixIcon":"","recordField":"function_name","autoscale":true,"alignment":"center","colorThresholdTarget":"value"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"columnWidths":{}},"unitsOverrides":[{"identifier":"active_instances","unitCategory":"unspecified","baseUnit":"count","displayUnit":"","decimals":0,"suffix":"","delimiter":false,"added":0,"id":"active_instances"}],"histogram":{"dataMappings":[{"valueAxis":"interval","rangeAxis":""}]},"honeycomb":{"shape":"square"}}},"12":{"type":"markdown","title":"","content":"## Performance"},"13":{"type":"markdown","title":"","content":"Executions by Function & Project.id"},"14":{"type":"data","title":"Executions (sum)","query":"timeseries execution_count=sum(cloud.gcp.cloudfunctions_googleapis_com.function.execution_count), by: { function_name, gcp.project.id,`dt.entity.cloud:gcp:cloud_function` }, filter:in(gcp.project.id, $gcp_project_id)\n| sort arraySum(execution_count) desc\n| limit toLong($top)","davis":{"enabled":false,"davisVisualization":{"isAvailable":true}},"visualization":"lineChart","visualizationSettings":{"thresholds":[{"id":"0","title":"","field":"active_instances","rules":[{"id":"0","label":"","comparator":"≥","color":"#7dc540"},{"id":"1","label":"","comparator":"≥","color":"#f5d30f"},{"id":"2","label":"","comparator":"≥","color":"#dc172a"}],"isEnabled":true}],"chartSettings":{"seriesOverrides":[],"gapPolicy":"gap","legend":{"hidden":false,"position":"auto"},"leftYAxisSettings":{"label":"","scale":"linear"},"categoricalBarChartSettings":{"categoryAxis":"function_name","categoryAxisLabel":"function_name","valueAxis":"interval","valueAxisLabel":"interval","layout":"horizontal"},"fieldMapping":{"timestamp":"timeframe","leftAxisValues":["execution_count"],"leftAxisDimensions":["function_name","gcp.project.id","dt.entity.cloud:gcp:cloud_function"],"fields":[],"values":[]},"hiddenLegendFields":["dt.entity.cloud:gcp:cloud_function","execution_count"]},"singleValue":{"showLabel":true,"label":"","prefixIcon":"","recordField":"function_name","autoscale":true,"alignment":"center","colorThresholdTarget":"value"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"columnWidths":{}},"unitsOverrides":[{"identifier":"active_instances","unitCategory":"unspecified","baseUnit":"count","displayUnit":"","decimals":0,"suffix":"","delimiter":false,"added":0,"id":"active_instances"}],"histogram":{"dataMappings":[{"valueAxis":"interval","rangeAxis":""}]},"honeycomb":{"shape":"square"}}},"15":{"type":"data","title":"Executions (sum)","query":"timeseries sum=sum(cloud.gcp.cloudfunctions_googleapis_com.function.execution_count), by: { function_name, gcp.project.id }, filter:in(gcp.project.id, $gcp_project_id)\n| fields `function_name|gcp.project.id`=concat(function_name,\" | \",gcp.project.id), execution_count=arraySum(sum)\n| sort execution_count desc\n| limit toLong($top)","davis":{"enabled":false,"davisVisualization":{"isAvailable":true}},"visualization":"categoricalBarChart","visualizationSettings":{"thresholds":[{"id":"0","title":"","field":"active_instances","rules":[{"id":"0","label":"","comparator":"≥","color":"#7dc540"},{"id":"1","label":"","comparator":"≥","color":"#f5d30f"},{"id":"2","label":"","comparator":"≥","color":"#dc172a"}],"isEnabled":true}],"chartSettings":{"seriesOverrides":[],"gapPolicy":"gap","leftYAxisSettings":{"label":""},"categoricalBarChartSettings":{"categoryAxis":"function_name|gcp.project.id","categoryAxisLabel":"","valueAxis":"execution_count","valueAxisLabel":"","layout":"horizontal"}},"singleValue":{"showLabel":true,"label":"","prefixIcon":"","recordField":"function_name","autoscale":true,"alignment":"center","colorThresholdTarget":"value"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"columnWidths":{}},"unitsOverrides":[{"identifier":"active_instances","unitCategory":"unspecified","baseUnit":"count","displayUnit":"","decimals":0,"suffix":"","delimiter":false,"added":0,"id":"active_instances"}],"histogram":{"dataMappings":[{"valueAxis":"execution_count","rangeAxis":""}]},"honeycomb":{"shape":"square"}}},"16":{"type":"markdown","title":"","content":"Execution times (ns) by Function"},"17":{"type":"data","title":"Executions times (avg)","query":"timeseries avg=avg(cloud.gcp.cloudfunctions_googleapis_com.function.execution_times), by: { function_name }, filter:in(gcp.project.id, $gcp_project_id)\n| fields function_name, execution_times=arrayAvg(avg)\n| sort execution_times desc\n| limit toLong($top)","davis":{"enabled":false,"davisVisualization":{"isAvailable":true}},"visualization":"categoricalBarChart","visualizationSettings":{"thresholds":[{"id":"0","title":"","field":"active_instances","rules":[{"id":"0","label":"","comparator":"≥","color":"#7dc540"},{"id":"1","label":"","comparator":"≥","color":"#f5d30f"},{"id":"2","label":"","comparator":"≥","color":"#dc172a"}],"isEnabled":true}],"chartSettings":{"seriesOverrides":[],"gapPolicy":"gap","leftYAxisSettings":{"label":""},"categoricalBarChartSettings":{"categoryAxis":"function_name","categoryAxisLabel":"","valueAxis":"execution_times","valueAxisLabel":"","layout":"horizontal","categoryAxisTickLayout":"horizontal"}},"singleValue":{"showLabel":true,"label":"","prefixIcon":"","recordField":"function_name","autoscale":true,"alignment":"center","colorThresholdTarget":"value"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"columnWidths":{}},"unitsOverrides":[{"identifier":"execution_times","unitCategory":"time","baseUnit":"nanosecond","displayUnit":null,"decimals":1,"suffix":"","delimiter":false,"added":0,"id":"active_instances"}],"histogram":{"dataMappings":[{"valueAxis":"execution_times","rangeAxis":""}]},"honeycomb":{"shape":"square"}}},"18":{"type":"data","title":"Executions times (avg)","query":"timeseries execution_times=avg(cloud.gcp.cloudfunctions_googleapis_com.function.execution_times), by: { function_name,`dt.entity.cloud:gcp:cloud_function` }, filter:in(gcp.project.id, $gcp_project_id)\n| sort arrayAvg(execution_times) desc\n| limit toLong($top)","davis":{"enabled":false,"davisVisualization":{"isAvailable":true}},"visualization":"lineChart","visualizationSettings":{"thresholds":[{"id":"0","title":"","field":"active_instances","rules":[{"id":"0","label":"","comparator":"≥","color":"#7dc540"},{"id":"1","label":"","comparator":"≥","color":"#f5d30f"},{"id":"2","label":"","comparator":"≥","color":"#dc172a"}],"isEnabled":true}],"chartSettings":{"seriesOverrides":[],"gapPolicy":"gap","legend":{"hidden":false,"position":"auto"},"leftYAxisSettings":{"label":"","scale":"linear"},"categoricalBarChartSettings":{"categoryAxis":"function_name","categoryAxisLabel":"function_name","valueAxis":"interval","valueAxisLabel":"interval","layout":"horizontal"},"fieldMapping":{"timestamp":"timeframe","leftAxisValues":["execution_times"],"leftAxisDimensions":["function_name","dt.entity.cloud:gcp:cloud_function"],"fields":[],"values":[]},"hiddenLegendFields":["dt.entity.cloud:gcp:cloud_function","execution_times"]},"singleValue":{"showLabel":true,"label":"","prefixIcon":"","recordField":"function_name","autoscale":true,"alignment":"center","colorThresholdTarget":"value"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"columnWidths":{}},"unitsOverrides":[],"histogram":{"dataMappings":[{"valueAxis":"interval","rangeAxis":""}]},"honeycomb":{"shape":"square"}}},"19":{"type":"markdown","title":"","content":"Memory usage (bytes) by Function"},"20":{"type":"data","title":"Memory usage (avg)","query":"timeseries user_memory_bytes=avg(cloud.gcp.cloudfunctions_googleapis_com.function.user_memory_bytes), by: { function_name,`dt.entity.cloud:gcp:cloud_function` }, filter:in(gcp.project.id, $gcp_project_id)\n| sort arrayAvg(user_memory_bytes) desc\n| limit toLong($top)","davis":{"enabled":false,"davisVisualization":{"isAvailable":true}},"visualization":"lineChart","visualizationSettings":{"thresholds":[{"id":"0","title":"","field":"active_instances","rules":[{"id":"0","label":"","comparator":"≥","color":"#7dc540"},{"id":"1","label":"","comparator":"≥","color":"#f5d30f"},{"id":"2","label":"","comparator":"≥","color":"#dc172a"}],"isEnabled":true}],"chartSettings":{"seriesOverrides":[],"gapPolicy":"gap","legend":{"hidden":false,"position":"auto"},"leftYAxisSettings":{"label":"","scale":"linear"},"categoricalBarChartSettings":{"categoryAxis":"function_name","categoryAxisLabel":"function_name","valueAxis":"interval","valueAxisLabel":"interval","layout":"horizontal"},"fieldMapping":{"timestamp":"timeframe","leftAxisValues":["user_memory_bytes"],"leftAxisDimensions":["function_name","dt.entity.cloud:gcp:cloud_function"],"fields":[],"values":[]},"hiddenLegendFields":["dt.entity.cloud:gcp:cloud_function","user_memory_bytes"]},"singleValue":{"showLabel":true,"label":"","prefixIcon":"","recordField":"function_name","autoscale":true,"alignment":"center","colorThresholdTarget":"value"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"columnWidths":{}},"unitsOverrides":[{"identifier":"user_memory_bytes","unitCategory":"data","baseUnit":"byte","displayUnit":null,"decimals":0,"suffix":"","delimiter":false,"added":0,"id":"active_instances"}],"histogram":{"dataMappings":[{"valueAxis":"interval","rangeAxis":""}]},"honeycomb":{"shape":"square"}}},"21":{"type":"data","title":"Memory usage (avg)","query":"timeseries avg=avg(cloud.gcp.cloudfunctions_googleapis_com.function.user_memory_bytes), by: { function_name }, filter:in(gcp.project.id, $gcp_project_id)\n| fields function_name, user_memory_bytes=arrayAvg(avg)\n| sort user_memory_bytes desc\n| limit toLong($top)","davis":{"enabled":false,"davisVisualization":{"isAvailable":true}},"visualization":"categoricalBarChart","visualizationSettings":{"thresholds":[{"id":"0","title":"","field":"active_instances","rules":[{"id":"0","label":"","comparator":"≥","color":"#7dc540"},{"id":"1","label":"","comparator":"≥","color":"#f5d30f"},{"id":"2","label":"","comparator":"≥","color":"#dc172a"}],"isEnabled":true}],"chartSettings":{"seriesOverrides":[],"gapPolicy":"gap","leftYAxisSettings":{"label":""},"categoricalBarChartSettings":{"categoryAxis":"function_name","categoryAxisLabel":"","valueAxis":"user_memory_bytes","valueAxisLabel":"","layout":"horizontal","categoryAxisTickLayout":"horizontal"}},"singleValue":{"showLabel":true,"label":"","prefixIcon":"","recordField":"function_name","autoscale":true,"alignment":"center","colorThresholdTarget":"value"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"columnWidths":{}},"unitsOverrides":[{"identifier":"user_memory_bytes","unitCategory":"data","baseUnit":"byte","displayUnit":null,"decimals":0,"suffix":"","delimiter":false,"added":0,"id":"active_instances"}],"histogram":{"dataMappings":[{"valueAxis":"user_memory_bytes","rangeAxis":""}]},"honeycomb":{"shape":"square"}}},"22":{"type":"markdown","title":"","content":"## Failures"},"23":{"type":"markdown","title":"","content":"Failed execution count by Function"},"25":{"type":"data","title":"Executions (sum)","query":"timeseries execution_count=sum(cloud.gcp.cloudfunctions_googleapis_com.function.execution_count), by: { status, function_name,`dt.entity.cloud:gcp:cloud_function`}, filter:in(gcp.project.id, $gcp_project_id)\n| filter status!=\"ok\"\n| filter status!=\"crash\"\n| sort arraySum(execution_count) desc\n| limit toLong($top)","davis":{"enabled":false,"davisVisualization":{"isAvailable":true}},"visualization":"lineChart","visualizationSettings":{"thresholds":[{"id":"0","title":"","field":"active_instances","rules":[{"id":"0","label":"","comparator":"≥","color":"#7dc540"},{"id":"1","label":"","comparator":"≥","color":"#f5d30f"},{"id":"2","label":"","comparator":"≥","color":"#dc172a"}],"isEnabled":true}],"chartSettings":{"seriesOverrides":[],"gapPolicy":"gap","leftYAxisSettings":{"label":""},"categoricalBarChartSettings":{"categoryAxis":"status","categoryAxisLabel":"status","valueAxis":"interval","valueAxisLabel":"interval","layout":"horizontal"},"fieldMapping":{"timestamp":"timeframe","leftAxisValues":["execution_count"],"leftAxisDimensions":["status","function_name","dt.entity.cloud:gcp:cloud_function"],"fields":[],"values":[]},"hiddenLegendFields":["dt.entity.cloud:gcp:cloud_function","execution_count"]},"singleValue":{"showLabel":true,"label":"","prefixIcon":"","recordField":"function_name","autoscale":true,"alignment":"center","colorThresholdTarget":"value"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"columnWidths":{}},"unitsOverrides":[{"identifier":"active_instances","unitCategory":"unspecified","baseUnit":"count","displayUnit":"","decimals":0,"suffix":"","delimiter":false,"added":0,"id":"active_instances"}],"histogram":{"dataMappings":[{"valueAxis":"interval","rangeAxis":""}]},"honeycomb":{"shape":"square"}}},"26":{"type":"data","title":"Executions (sum)","query":"timeseries sum=sum(cloud.gcp.cloudfunctions_googleapis_com.function.execution_count), by: { status, function_name }, filter:in(gcp.project.id, $gcp_project_id)\n| filter status!=\"ok\"\n| filter status!=\"crash\"\n| fields status, function_name, execution_count=arraySum(sum)\n| sort execution_count desc\n| limit toLong($top)","davis":{"enabled":false,"davisVisualization":{"isAvailable":true}},"visualization":"table","visualizationSettings":{"thresholds":[{"id":"0","title":"","field":"execution_count","rules":[{"id":"0","label":"","comparator":"≥","color":"#7dc540"},{"id":"1","label":"","comparator":">","color":"#f5d30f","value":0},{"id":"2","label":"","comparator":"≥","color":"#dc172a"}],"isEnabled":true}],"chartSettings":{"seriesOverrides":[],"gapPolicy":"gap","leftYAxisSettings":{"label":""},"categoricalBarChartSettings":{"categoryAxis":"status","categoryAxisLabel":"status","valueAxis":"execution_count","valueAxisLabel":"execution_count","layout":"horizontal"}},"singleValue":{"showLabel":true,"label":"","prefixIcon":"","recordField":"function_name","autoscale":true,"alignment":"center","colorThresholdTarget":"value"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"columnWidths":{}},"unitsOverrides":[{"identifier":"active_instances","unitCategory":"unspecified","baseUnit":"count","displayUnit":"","decimals":0,"suffix":"","delimiter":false,"added":0,"id":"active_instances"}],"histogram":{"dataMappings":[{"valueAxis":"execution_count","rangeAxis":""}]},"honeycomb":{"shape":"square"}}},"27":{"type":"markdown","title":"","content":"Function crashes by Function"},"28":{"type":"data","title":"Executions (sum)","query":"timeseries sum=sum(cloud.gcp.cloudfunctions_googleapis_com.function.execution_count), by: { status, function_name }, filter:in(gcp.project.id, $gcp_project_id)\n| filter status==\"crash\"\n| fields status,function_name, execution_count=arraySum(sum)\n| sort execution_count desc\n| limit toLong($top)","davis":{"enabled":false,"davisVisualization":{"isAvailable":true}},"visualization":"table","visualizationSettings":{"thresholds":[{"id":"0","title":"","field":"execution_count","rules":[{"id":"0","label":"","comparator":"≥","color":"#7dc540"},{"id":"1","label":"","comparator":"≥","color":"#f5d30f"},{"id":"2","label":"","comparator":">","color":"#dc172a","value":0}],"isEnabled":true}],"chartSettings":{"seriesOverrides":[],"gapPolicy":"gap","leftYAxisSettings":{"label":""},"categoricalBarChartSettings":{"categoryAxis":"status","categoryAxisLabel":"status","valueAxis":"execution_count","valueAxisLabel":"execution_count","layout":"horizontal"}},"singleValue":{"showLabel":true,"label":"","prefixIcon":"","recordField":"function_name","autoscale":true,"alignment":"center","colorThresholdTarget":"value"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"columnWidths":{}},"unitsOverrides":[{"identifier":"active_instances","unitCategory":"unspecified","baseUnit":"count","displayUnit":"","decimals":0,"suffix":"","delimiter":false,"added":0,"id":"active_instances"}],"histogram":{"dataMappings":[{"valueAxis":"execution_count","rangeAxis":""}]},"honeycomb":{"shape":"square"}}},"29":{"type":"data","title":"Executions","query":"timeseries execution_count=sum(cloud.gcp.cloudfunctions_googleapis_com.function.execution_count), by: { status, function_name,`dt.entity.cloud:gcp:cloud_function` }, filter:in(gcp.project.id, $gcp_project_id)\n| filter status==\"crash\"\n| sort arraySum(execution_count) desc\n| limit toLong($top)","davis":{"enabled":false,"davisVisualization":{"isAvailable":true}},"visualization":"lineChart","visualizationSettings":{"thresholds":[{"id":"0","title":"","field":"active_instances","rules":[{"id":"0","label":"","comparator":"≥","color":"#7dc540"},{"id":"1","label":"","comparator":"≥","color":"#f5d30f"},{"id":"2","label":"","comparator":"≥","color":"#dc172a"}],"isEnabled":true}],"chartSettings":{"seriesOverrides":[],"gapPolicy":"gap","leftYAxisSettings":{"label":""},"categoricalBarChartSettings":{"categoryAxis":"status","categoryAxisLabel":"status","valueAxis":"interval","valueAxisLabel":"interval","layout":"horizontal"},"fieldMapping":{"timestamp":"timeframe","leftAxisValues":["execution_count"],"leftAxisDimensions":["status","function_name","dt.entity.cloud:gcp:cloud_function"],"fields":[],"values":[]},"hiddenLegendFields":["dt.entity.cloud:gcp:cloud_function","execution_count"]},"singleValue":{"showLabel":true,"label":"","prefixIcon":"","recordField":"function_name","autoscale":true,"alignment":"center","colorThresholdTarget":"value"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"columnWidths":{}},"unitsOverrides":[{"identifier":"active_instances","unitCategory":"unspecified","baseUnit":"count","displayUnit":"","decimals":0,"suffix":"","delimiter":false,"added":0,"id":"active_instances"}],"histogram":{"dataMappings":[{"valueAxis":"interval","rangeAxis":""}]},"honeycomb":{"shape":"square"}}},"30":{"type":"markdown","title":"","content":"## Link\nclick on `gcp.project.id` or on `function_name` + **[↗] Open with** + **Cloud**"},"31":{"type":"data","title":"Functions","query":"timeseries{ active_instances=sum(cloud.gcp.cloudfunctions_googleapis_com.function.active_instances),\n  execution_count=sum(cloud.gcp.cloudfunctions_googleapis_com.function.execution_count),\n  execution_times=avg(cloud.gcp.cloudfunctions_googleapis_com.function.execution_times)\n  }, \n  by:{function_name, gcp.project.id,`dt.entity.cloud:gcp:project`,`dt.entity.cloud:gcp:cloud_function`}, filter:in(gcp.project.id, $gcp_project_id)\n |filter function_name!=\"\"\n |fields  gcp.project.id,`dt.entity.cloud:gcp:project`, function_name, `dt.entity.cloud:gcp:cloud_function`,  `active_instances (sum)`=arraySum(active_instances), `execution_count (sum)`=arraySum(execution_count), `execution_times (avg)`=arraySum(execution_times)\n |sort `active_instances (sum)` desc\n |limit toLong($top)","davis":{"enabled":false,"davisVisualization":{"isAvailable":true}},"visualization":"table","visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"categoricalBarChartSettings":{"categoryAxis":"gcp.project.id","categoryAxisLabel":"gcp.project.id","valueAxis":"active_instances (sum)","valueAxisLabel":"active_instances (sum)"}},"singleValue":{"showLabel":true,"label":"","prefixIcon":"","recordField":"gcp.project.id","autoscale":true,"alignment":"center","colorThresholdTarget":"value"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[["dt.entity.cloud:gcp:project"],["dt.entity.cloud:gcp:cloud_function"]],"lineWrapIds":[],"columnWidths":{}},"histogram":{"dataMappings":[{"valueAxis":"active_instances (sum)","rangeAxis":""},{"valueAxis":"execution_count (sum)","rangeAxis":""},{"valueAxis":"execution_times (avg)","rangeAxis":""}]},"honeycomb":{"shape":"square"},"unitsOverrides":[{"identifier":"execution_times (avg)","unitCategory":"time","baseUnit":"nanosecond","displayUnit":null,"decimals":2,"suffix":"","delimiter":false,"added":1711287334564},{"identifier":"active_instances (sum)","unitCategory":"unspecified","baseUnit":"none","displayUnit":null,"decimals":0,"suffix":"","delimiter":true,"added":1711470123185},{"identifier":"execution_count (sum)","unitCategory":"unspecified","baseUnit":"none","displayUnit":null,"decimals":0,"suffix":"","delimiter":true,"added":1711470127699}]}},"32":{"type":"markdown","title":"","content":"# Google Cloud Function\n"},"33":{"type":"markdown","title":"","content":"Cloud Functions provides a connective layer of logic that lets you write code to connect and extend cloud services.\n\nGCP metrics are filtered by `gcp_project_id`, splitted by some dimension(s) and aggregated by \n- `sum` = sum of period and the other dimensions (example `count`), or\n- `avg` = average over the period and over the other dimensions (example `latency`)."}},"layouts":{"0":{"x":0,"y":2,"w":11,"h":1},"1":{"x":0,"y":3,"w":12,"h":1},"2":{"x":6,"y":4,"w":6,"h":5},"3":{"x":0,"y":4,"w":6,"h":5},"4":{"x":0,"y":9,"w":12,"h":1},"5":{"x":12,"y":4,"w":6,"h":5},"6":{"x":12,"y":3,"w":6,"h":1},"7":{"x":18,"y":3,"w":6,"h":1},"8":{"x":18,"y":4,"w":6,"h":5},"10":{"x":0,"y":10,"w":6,"h":5},"11":{"x":6,"y":10,"w":6,"h":5},"12":{"x":0,"y":15,"w":24,"h":1},"13":{"x":12,"y":9,"w":12,"h":1},"14":{"x":18,"y":10,"w":6,"h":5},"15":{"x":12,"y":10,"w":6,"h":5},"16":{"x":0,"y":16,"w":12,"h":1},"17":{"x":0,"y":17,"w":6,"h":5},"18":{"x":6,"y":17,"w":6,"h":5},"19":{"x":12,"y":16,"w":12,"h":1},"20":{"x":18,"y":17,"w":6,"h":5},"21":{"x":12,"y":17,"w":6,"h":5},"22":{"x":0,"y":22,"w":24,"h":1},"23":{"x":0,"y":23,"w":12,"h":1},"25":{"x":6,"y":24,"w":6,"h":5},"26":{"x":0,"y":24,"w":6,"h":5},"27":{"x":12,"y":23,"w":12,"h":1},"28":{"x":12,"y":24,"w":6,"h":5},"29":{"x":18,"y":24,"w":6,"h":5},"30":{"x":0,"y":29,"w":24,"h":2},"31":{"x":0,"y":31,"w":18,"h":6},"32":{"x":0,"y":0,"w":11,"h":2},"33":{"x":12,"y":0,"w":12,"h":3}}}