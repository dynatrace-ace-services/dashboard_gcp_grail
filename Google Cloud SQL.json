{"version":13,"variables":[{"key":"gcp_project_id","type":"query","input":"timeseries count(cloud.gcp.cloudsql_googleapis_com.database.up), by:{ gcp.project.id }\n| summarize sql=count(), by: {gcp.project.id}\n| sort sql desc\n| fields gcp.project.id","multiple":true},{"key":"top","type":"csv","input":"5, 10, 20 , 50, 100, 500","multiple":false}],"tiles":{"0":{"type":"markdown","title":"","content":"# Google Cloud SQL"},"1":{"type":"markdown","title":"","content":"## Usage"},"2":{"type":"markdown","title":"","content":"## Performance"},"3":{"type":"markdown","title":"","content":"## Failover"},"4":{"type":"markdown","title":"","content":"Servers up"},"5":{"type":"markdown","title":"","content":"Servers up by Project"},"6":{"type":"markdown","title":"","content":"Servers up by Region"},"7":{"type":"markdown","title":"","content":"## Link\nclick on `gcp.project.id` or on `database.id` + **[↗] Open with** + **Cloud**"},"9":{"type":"markdown","title":"","content":"Connections by Database"},"10":{"type":"markdown","title":"","content":"Queries count by Database"},"11":{"type":"markdown","title":"","content":"CPU usage by Database"},"12":{"type":"markdown","title":"","content":"Memory utilization % by Database"},"13":{"type":"markdown","title":"","content":"Disk utilization by Database"},"15":{"type":"markdown","title":"","content":"Read Ops"},"16":{"type":"markdown","title":"","content":"Write Ops"},"19":{"type":"data","title":"Servers up","query":"timeseries database.up=min(`cloud.gcp.cloudsql_googleapis_com.database.up`), by:{ database_id, backend_name }, filter:in(gcp.project.id, $gcp_project_id)\n\n","davis":{"enabled":false,"davisVisualization":{"isAvailable":true}},"visualization":"lineChart","visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"categoricalBarChartSettings":{"categoryAxis":"database_id","valueAxis":"interval","categoryAxisLabel":"database_id","valueAxisLabel":"interval","layout":"horizontal"},"fieldMapping":{"timestamp":"timeframe","leftAxisValues":["database.up"],"leftAxisDimensions":["database_id"],"fields":[],"values":[]},"leftYAxisSettings":{"min":"auto","max":1}},"singleValue":{"showLabel":true,"label":"","prefixIcon":"","recordField":"error","autoscale":true,"alignment":"center","colorThresholdTarget":"value"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"columnWidths":{}},"histogram":{"dataMappings":[{"valueAxis":"interval","rangeAxis":""}]},"honeycomb":{"shape":"square"}}},"23":{"type":"data","title":"","query":"timeseries database.up=avg(`cloud.gcp.cloudsql_googleapis_com.database.up`), by:{ database_id }, filter:in(gcp.project.id, $gcp_project_id)\n| summarize last=takeLast(arrayMin(database.up)), by:{database_id}\n| summarize `up (last interval)`=countif(last==1)\n","davis":{"enabled":false,"davisVisualization":{"isAvailable":true}},"visualization":"singleValue","visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"categoricalBarChartSettings":{"categoryAxisLabel":"database_id","valueAxisLabel":"last","layout":"horizontal"}},"singleValue":{"showLabel":true,"label":"","prefixIcon":"","recordField":"up (last interval)","autoscale":true,"alignment":"center","colorThresholdTarget":"value"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"columnWidths":{}},"histogram":{"dataMappings":[{"valueAxis":"up (last interval)","rangeAxis":""}]},"honeycomb":{"shape":"square"}}},"24":{"type":"data","title":"","query":"timeseries  interval:15m, database.up=avg(`cloud.gcp.cloudsql_googleapis_com.database.up`), by:{ database_id }, filter:in(gcp.project.id, $gcp_project_id)\n| summarize `total (period)`=count()\n","davis":{"enabled":false,"davisVisualization":{"isAvailable":true}},"visualization":"singleValue","visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"categoricalBarChartSettings":{"categoryAxisLabel":"database_id","valueAxisLabel":"total","layout":"horizontal"}},"singleValue":{"showLabel":true,"label":"","prefixIcon":"","recordField":"total (period)","autoscale":true,"alignment":"center","colorThresholdTarget":"value"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"columnWidths":{}},"histogram":{"dataMappings":[{"valueAxis":"total (period)","rangeAxis":""}]},"honeycomb":{"shape":"square"}}},"25":{"type":"data","title":"Servers up","query":"timeseries  database.up=avg(cloud.gcp.cloudsql_googleapis_com.database.up), by: {database_id, gcp.project.id}, filter:in(gcp.project.id, $gcp_project_id)\n| summarize last=takeLast(arrayMin(database.up)), by:{database_id,  gcp.project.id}\n| summarize up=countif(last==1), by: { gcp.project.id}\n| sort up desc\n\n","davis":{"enabled":false,"davisVisualization":{"isAvailable":true}},"visualization":"donutChart","visualizationSettings":{"thresholds":[{"id":"0","title":"","field":"up","rules":[{"id":"0","label":"","comparator":"≥","color":"#7dc540"},{"id":"1","label":"","comparator":"≥","color":"#f5d30f"},{"id":"2","label":"","comparator":"≥","color":"#dc172a"}],"isEnabled":true}],"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"number-of-slices","groupingThresholdValue":10,"valueType":"absolute","showTotalValue":true,"hideLabels":false,"groupingName":null,"totalValueLabel":"all"},"categoryOverrides":{},"categoricalBarChartSettings":{"categoryAxis":"gcp.project.id","categoryAxisLabel":"gcp.project.id","valueAxis":"up","valueAxisLabel":"up","layout":"horizontal"}},"singleValue":{"showLabel":true,"label":"","prefixIcon":"","autoscale":true,"alignment":"center","colorThresholdTarget":"value","recordField":"database_id"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"columnWidths":{}},"unitsOverrides":[{"identifier":"up","unitCategory":"unspecified","baseUnit":"count","displayUnit":"","decimals":0,"suffix":"","delimiter":false,"added":0,"id":"up"}],"histogram":{"dataMappings":[{"valueAxis":"up","rangeAxis":""}]},"honeycomb":{"shape":"square"}}},"26":{"type":"data","title":"Servers up","query":"timeseries database.up=avg(cloud.gcp.cloudsql_googleapis_com.database.up), by: {database_id, gcp.region}, filter:in(gcp.project.id, $gcp_project_id)\n| summarize last=takeLast(arrayMin(database.up)), by:{database_id, gcp.region}\n| summarize up=countif(last==1), by: {gcp.region}","davis":{"enabled":false,"davisVisualization":{"isAvailable":true}},"visualization":"donutChart","visualizationSettings":{"thresholds":[{"id":"0","title":"","field":"up","rules":[{"id":"0","label":"","comparator":"≥","color":"#7dc540"},{"id":"1","label":"","comparator":"≥","color":"#f5d30f"},{"id":"2","label":"","comparator":"≥","color":"#dc172a"}],"isEnabled":true}],"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"number-of-slices","groupingThresholdValue":10,"valueType":"absolute","showTotalValue":true,"hideLabels":false,"totalValueLabel":"all"},"categoryOverrides":{},"categoricalBarChartSettings":{"categoryAxis":"gcp.region","categoryAxisLabel":"gcp.region","valueAxis":"up","valueAxisLabel":"up","layout":"horizontal"},"legend":{"position":"auto","hidden":false}},"singleValue":{"showLabel":true,"label":"","prefixIcon":"","autoscale":true,"alignment":"center","colorThresholdTarget":"value","recordField":"database_id"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"columnWidths":{}},"unitsOverrides":[{"identifier":"up","unitCategory":"unspecified","baseUnit":"count","displayUnit":"","decimals":0,"suffix":"","delimiter":false,"added":0,"id":"up"}],"histogram":{"dataMappings":[{"valueAxis":"up","rangeAxis":""}]},"honeycomb":{"shape":"square"}}},"27":{"type":"data","title":"Connections (avg)","query":"timeseries connections=avg(cloud.gcp.cloudsql_googleapis_com.database.network.connections), by: { database_id }, filter:in(gcp.project.id, $gcp_project_id)\n| sort arrayAvg(connections) desc\n| limit toLong($top)","davis":{"enabled":false,"davisVisualization":{"isAvailable":true}},"visualization":"lineChart","visualizationSettings":{"thresholds":[{"id":"0","title":"","field":"connections","rules":[{"id":"0","label":"","comparator":"≥","color":"#7dc540"},{"id":"1","label":"","comparator":"≥","color":"#f5d30f"},{"id":"2","label":"","comparator":"≥","color":"#dc172a"}],"isEnabled":true}],"chartSettings":{"seriesOverrides":[],"gapPolicy":"gap","legend":{"hidden":false},"leftYAxisSettings":{"label":""},"categoricalBarChartSettings":{"categoryAxis":"database_id","categoryAxisLabel":"database_id","valueAxis":"interval","valueAxisLabel":"interval"},"fieldMapping":{"timestamp":"timeframe","leftAxisValues":["connections"],"leftAxisDimensions":["database_id"],"fields":[],"values":[]},"hiddenLegendFields":["connections"]},"singleValue":{"showLabel":true,"label":"","prefixIcon":"","autoscale":true,"alignment":"center","colorThresholdTarget":"value","recordField":"gcp.project.id"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"columnWidths":{}},"unitsOverrides":[{"identifier":"connections","unitCategory":"unspecified","baseUnit":"count","displayUnit":"","decimals":0,"suffix":"","delimiter":false,"added":0,"id":"connections"}],"histogram":{"dataMappings":[]},"honeycomb":{"shape":"square"}}},"28":{"type":"data","title":"Queries (sum)","query":"timeseries queries.count=sum(cloud.gcp.cloudsql_googleapis_com.database.mysql.queries.count), by: { database_id }, filter:in(gcp.project.id, $gcp_project_id)\n| sort arraySum(queries.count) desc\n| limit toLong($top)","davis":{"enabled":false,"davisVisualization":{"isAvailable":true}},"visualization":"lineChart","visualizationSettings":{"thresholds":[{"id":"0","title":"","field":"count","rules":[{"id":"0","label":"","comparator":"≥","color":"#7dc540"},{"id":"1","label":"","comparator":"≥","color":"#f5d30f"},{"id":"2","label":"","comparator":"≥","color":"#dc172a"}],"isEnabled":true}],"chartSettings":{"seriesOverrides":[],"gapPolicy":"gap","legend":{"hidden":false},"leftYAxisSettings":{"label":""},"categoricalBarChartSettings":{"categoryAxis":"database_id","categoryAxisLabel":"database_id","valueAxis":"interval","valueAxisLabel":"interval"},"fieldMapping":{"timestamp":"timeframe","leftAxisValues":["queries.count"],"leftAxisDimensions":["database_id"],"fields":[],"values":[]},"hiddenLegendFields":["queries.count"]},"singleValue":{"showLabel":true,"label":"","prefixIcon":"","autoscale":true,"alignment":"center","colorThresholdTarget":"value","recordField":"gcp.project.id"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"columnWidths":{}},"unitsOverrides":[{"identifier":"count","unitCategory":"unspecified","baseUnit":"count","displayUnit":"","decimals":0,"suffix":"","delimiter":false,"added":0,"id":"count"}],"histogram":{"dataMappings":[]},"honeycomb":{"shape":"square"}}},"29":{"type":"data","title":"Queries count (sum)","query":"timeseries sum=sum(cloud.gcp.cloudsql_googleapis_com.database.mysql.queries.count, rollup:sum), by: { database_id }, filter:in(gcp.project.id, $gcp_project_id)\n| fields database_id, queries.count=arraySum(sum)\n| sort queries.count desc\n| limit toLong($top)","davis":{"enabled":false,"davisVisualization":{"isAvailable":true}},"visualization":"categoricalBarChart","visualizationSettings":{"thresholds":[{"id":"0","title":"","field":"count","rules":[{"id":"0","label":"","comparator":"≥","color":"#7dc540"},{"id":"1","label":"","comparator":"≥","color":"#f5d30f"},{"id":"2","label":"","comparator":"≥","color":"#dc172a"}],"isEnabled":true}],"chartSettings":{"seriesOverrides":[],"gapPolicy":"gap","leftYAxisSettings":{"label":""},"categoricalBarChartSettings":{"categoryAxis":"database_id","categoryAxisLabel":"","valueAxis":"queries.count","valueAxisLabel":"","scale":"absolute","layout":"horizontal"}},"singleValue":{"showLabel":true,"label":"","prefixIcon":"","autoscale":true,"alignment":"center","colorThresholdTarget":"value","recordField":"gcp.project.id"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"columnWidths":{}},"unitsOverrides":[{"identifier":"count","unitCategory":"unspecified","baseUnit":"count","displayUnit":"","decimals":0,"suffix":"","delimiter":false,"added":0,"id":"count"}],"histogram":{"dataMappings":[]},"honeycomb":{"shape":"square"}}},"30":{"type":"data","title":"CPU Utilization (avg)","query":"timeseries utilization=avg(cloud.gcp.cloudsql_googleapis_com.database.cpu.utilization), by: { database_id }, filter:in(gcp.project.id, $gcp_project_id)\n| sort arrayAvg(utilization) desc\n| limit toLong($top)","davis":{"enabled":false,"davisVisualization":{"isAvailable":true}},"visualization":"lineChart","visualizationSettings":{"thresholds":[{"id":"0","title":"","field":"utilization","rules":[{"id":"0","label":"","comparator":"≥","color":"#7dc540"},{"id":"1","label":"","comparator":"≥","color":"#f5d30f"},{"id":"2","label":"","comparator":"≥","color":"#dc172a"}],"isEnabled":true}],"chartSettings":{"seriesOverrides":[],"gapPolicy":"gap","legend":{"hidden":false},"leftYAxisSettings":{"label":""},"categoricalBarChartSettings":{"categoryAxis":"database_id","categoryAxisLabel":"database_id","valueAxis":"interval","valueAxisLabel":"interval"},"fieldMapping":{"timestamp":"timeframe","leftAxisValues":["utilization"],"leftAxisDimensions":["database_id"],"fields":[],"values":[]}},"singleValue":{"showLabel":true,"label":"","prefixIcon":"","recordField":"database_id","autoscale":true,"alignment":"center","colorThresholdTarget":"value"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"columnWidths":{}},"unitsOverrides":[{"identifier":"utilization","unitCategory":"percentage","baseUnit":"percent","displayUnit":"","decimals":2,"suffix":"","delimiter":false,"added":0,"id":"utilization"}],"histogram":{"dataMappings":[{"valueAxis":"interval","rangeAxis":""}]},"honeycomb":{"shape":"square"}}},"31":{"type":"data","title":"CPU Utilization (avg)","query":"timeseries avg=avg(cloud.gcp.cloudsql_googleapis_com.database.cpu.utilization), by: { database_id }, filter:in(gcp.project.id, $gcp_project_id)\n| fields database_id, utilization=arrayAvg(avg)\n| sort utilization desc\n| limit toLong($top)","davis":{"enabled":false,"davisVisualization":{"isAvailable":true}},"visualization":"categoricalBarChart","visualizationSettings":{"thresholds":[{"id":"0","title":"","field":"utilization","rules":[{"id":"0","label":"","comparator":"≥","color":"#7dc540"},{"id":"1","label":"","comparator":"≥","color":"#f5d30f"},{"id":"2","label":"","comparator":"≥","color":"#dc172a"}],"isEnabled":true}],"chartSettings":{"seriesOverrides":[],"gapPolicy":"gap","leftYAxisSettings":{"label":""},"categoricalBarChartSettings":{"categoryAxis":"database_id","categoryAxisLabel":"","valueAxis":"utilization","valueAxisLabel":"","layout":"horizontal"}},"singleValue":{"showLabel":true,"label":"","prefixIcon":"","recordField":"database_id","autoscale":true,"alignment":"center","colorThresholdTarget":"value"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"columnWidths":{}},"unitsOverrides":[{"identifier":"utilization","unitCategory":"percentage","baseUnit":"percent","displayUnit":"","decimals":2,"suffix":"","delimiter":false,"added":0,"id":"utilization"}],"histogram":{"dataMappings":[{"valueAxis":"utilization","rangeAxis":""}]},"honeycomb":{"shape":"square"}}},"32":{"type":"data","title":"Memory utilization (1=100%)","query":"timeseries memory_utilization=avg(cloud.gcp.cloudsql_googleapis_com.database.memory.utilization), by: { database_id }, filter:in(gcp.project.id, $gcp_project_id)\n| sort arrayAvg(memory_utilization) desc\n| limit toLong($top)","davis":{"enabled":false,"davisVisualization":{"isAvailable":true}},"visualization":"lineChart","visualizationSettings":{"thresholds":[{"id":"0","title":"","field":"utilization","rules":[{"id":"0","label":"","comparator":"≥","color":"#7dc540"},{"id":"1","label":"","comparator":"≥","color":"#f5d30f"},{"id":"2","label":"","comparator":"≥","color":"#dc172a"}],"isEnabled":true}],"chartSettings":{"seriesOverrides":[],"gapPolicy":"gap","legend":{"hidden":false},"leftYAxisSettings":{"label":""},"categoricalBarChartSettings":{"categoryAxis":"database_id","categoryAxisLabel":"database_id","valueAxis":"interval","valueAxisLabel":"interval"},"fieldMapping":{"timestamp":"timeframe","leftAxisValues":["memory_utilization"],"leftAxisDimensions":["database_id"],"fields":[],"values":[]},"hiddenLegendFields":["memory_utilization"]},"singleValue":{"showLabel":true,"label":"","prefixIcon":"","autoscale":true,"alignment":"center","colorThresholdTarget":"value","recordField":"database_id"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"columnWidths":{}},"unitsOverrides":[{"identifier":"utilization","unitCategory":"unspecified","baseUnit":"count","displayUnit":null,"decimals":2,"suffix":"","delimiter":false,"added":1711195466282}],"histogram":{"dataMappings":[{"valueAxis":"interval","rangeAxis":""}]},"honeycomb":{"shape":"square"}}},"33":{"type":"data","title":"Memory utilization (1=100%)","query":"timeseries avg=avg(cloud.gcp.cloudsql_googleapis_com.database.memory.utilization), by: { database_id }, filter:in(gcp.project.id, $gcp_project_id)\n| fields database_id, memory_utilization=arrayAvg(avg)\n| sort memory_utilization desc\n| limit toLong($top)","davis":{"enabled":false,"davisVisualization":{"isAvailable":true}},"visualization":"categoricalBarChart","visualizationSettings":{"thresholds":[{"id":"0","title":"","field":"utilization","rules":[{"id":"0","label":"","comparator":"≥","color":"#7dc540"},{"id":"1","label":"","comparator":"≥","color":"#f5d30f"},{"id":"2","label":"","comparator":"≥","color":"#dc172a"}],"isEnabled":true}],"chartSettings":{"seriesOverrides":[],"gapPolicy":"gap","leftYAxisSettings":{"label":""},"categoricalBarChartSettings":{"categoryAxis":"database_id","categoryAxisLabel":"","valueAxis":"memory_utilization","valueAxisLabel":"","layout":"horizontal"}},"singleValue":{"showLabel":true,"label":"","prefixIcon":"","autoscale":true,"alignment":"center","colorThresholdTarget":"value","recordField":"database_id"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"columnWidths":{}},"unitsOverrides":[{"identifier":"memory_utilization","unitCategory":"unspecified","baseUnit":"none","displayUnit":null,"decimals":2,"suffix":"","delimiter":false,"added":1711195558754}],"histogram":{"dataMappings":[{"valueAxis":"memory_utilization","rangeAxis":""}]},"honeycomb":{"shape":"square"}}},"34":{"type":"data","title":"Disk utilization in percentage (1=100%)","query":"timeseries avg=avg(cloud.gcp.cloudsql_googleapis_com.database.disk.utilization), by: { database_id }, filter:in(gcp.project.id, $gcp_project_id)\n| fields database_id, disk_utilization=arrayAvg(avg)\n| sort disk_utilization desc\n| limit toLong($top)","davis":{"enabled":false,"davisVisualization":{"isAvailable":true}},"visualization":"categoricalBarChart","visualizationSettings":{"thresholds":[{"id":"0","title":"","field":"utilization","rules":[{"id":"0","label":"","comparator":"≥","color":"#7dc540"},{"id":"1","label":"","comparator":"≥","color":"#f5d30f"},{"id":"2","label":"","comparator":"≥","color":"#dc172a"}],"isEnabled":true}],"chartSettings":{"seriesOverrides":[],"gapPolicy":"gap","leftYAxisSettings":{"label":""},"categoricalBarChartSettings":{"categoryAxis":"database_id","categoryAxisLabel":"","valueAxis":"disk_utilization","valueAxisLabel":"","layout":"horizontal"}},"singleValue":{"showLabel":true,"label":"","prefixIcon":"","autoscale":true,"alignment":"center","colorThresholdTarget":"value","recordField":"database_id"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"columnWidths":{}},"unitsOverrides":[{"identifier":"utilization","unitCategory":"unspecified","baseUnit":"count","displayUnit":"","decimals":0,"suffix":"","delimiter":false,"added":0,"id":"utilization"}],"histogram":{"dataMappings":[{"valueAxis":"disk_utilization","rangeAxis":""}]},"honeycomb":{"shape":"square"}}},"35":{"type":"data","title":"Disk utilization in percentage (1=100%)","query":"timeseries disk_utilization=avg(cloud.gcp.cloudsql_googleapis_com.database.disk.utilization), by: { database_id }, filter:in(gcp.project.id, $gcp_project_id)\n| sort arrayAvg(disk_utilization) desc\n| limit toLong($top)","davis":{"enabled":false,"davisVisualization":{"isAvailable":true}},"visualization":"lineChart","visualizationSettings":{"thresholds":[{"id":"0","title":"","field":"utilization","rules":[{"id":"0","label":"","comparator":"≥","color":"#7dc540"},{"id":"1","label":"","comparator":"≥","color":"#f5d30f"},{"id":"2","label":"","comparator":"≥","color":"#dc172a"}],"isEnabled":true}],"chartSettings":{"seriesOverrides":[],"gapPolicy":"gap","legend":{"hidden":false},"leftYAxisSettings":{"label":""},"categoricalBarChartSettings":{"categoryAxis":"database_id","categoryAxisLabel":"database_id","valueAxis":"interval","valueAxisLabel":"interval"},"fieldMapping":{"timestamp":"timeframe","leftAxisValues":["disk_utilization"],"leftAxisDimensions":["database_id"],"fields":[],"values":[]},"hiddenLegendFields":["disk_utilization"]},"singleValue":{"showLabel":true,"label":"","prefixIcon":"","autoscale":true,"alignment":"center","colorThresholdTarget":"value","recordField":"database_id"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"columnWidths":{}},"unitsOverrides":[{"identifier":"utilization","unitCategory":"unspecified","baseUnit":"count","displayUnit":"","decimals":0,"suffix":"","delimiter":false,"added":0,"id":"utilization"}],"histogram":{"dataMappings":[{"valueAxis":"interval","rangeAxis":""}]},"honeycomb":{"shape":"square"}}},"36":{"type":"data","title":"Read OPS (avg)","query":"timeseries read_ops_count=avg(cloud.gcp.cloudsql_googleapis_com.database.disk.read_ops_count), by: { database_id }, filter:in(gcp.project.id, $gcp_project_id)\n| sort arrayAvg(read_ops_count) desc\n| limit toLong($top)","davis":{"enabled":false,"davisVisualization":{"isAvailable":true}},"visualization":"lineChart","visualizationSettings":{"thresholds":[{"id":"0","title":"","field":"read_ops_count","rules":[{"id":"0","label":"","comparator":"≥","color":"#7dc540"},{"id":"1","label":"","comparator":"≥","color":"#f5d30f"},{"id":"2","label":"","comparator":"≥","color":"#dc172a"}],"isEnabled":true}],"chartSettings":{"seriesOverrides":[],"gapPolicy":"gap","legend":{"hidden":false},"leftYAxisSettings":{"label":""},"categoricalBarChartSettings":{"categoryAxis":"database_id","categoryAxisLabel":"database_id","valueAxis":"interval","valueAxisLabel":"interval"},"fieldMapping":{"timestamp":"timeframe","leftAxisValues":["read_ops_count"],"leftAxisDimensions":["database_id"],"fields":[],"values":[]},"hiddenLegendFields":["read_ops_count"]},"singleValue":{"showLabel":true,"label":"","prefixIcon":"","autoscale":true,"alignment":"center","colorThresholdTarget":"value","recordField":"database_id"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"columnWidths":{}},"unitsOverrides":[{"identifier":"read_ops_count","unitCategory":"unspecified","baseUnit":"count","displayUnit":"","decimals":0,"suffix":"","delimiter":false,"added":0,"id":"read_ops_count"}],"histogram":{"dataMappings":[{"valueAxis":"interval","rangeAxis":""}]},"honeycomb":{"shape":"square"}}},"37":{"type":"data","title":"Read OPS (avg)","query":"timeseries avg=avg(cloud.gcp.cloudsql_googleapis_com.database.disk.read_ops_count), by: { database_id }, filter:in(gcp.project.id, $gcp_project_id)\n| fields database_id, read_ops_count=arrayAvg(avg)\n| sort read_ops_count desc\n| limit toLong($top)","davis":{"enabled":false,"davisVisualization":{"isAvailable":true}},"visualization":"categoricalBarChart","visualizationSettings":{"thresholds":[{"id":"0","title":"","field":"read_ops_count","rules":[{"id":"0","label":"","comparator":"≥","color":"#7dc540"},{"id":"1","label":"","comparator":"≥","color":"#f5d30f"},{"id":"2","label":"","comparator":"≥","color":"#dc172a"}],"isEnabled":true}],"chartSettings":{"seriesOverrides":[],"gapPolicy":"gap","leftYAxisSettings":{"label":""},"categoricalBarChartSettings":{"categoryAxis":"database_id","categoryAxisLabel":"","valueAxis":"read_ops_count","valueAxisLabel":"","layout":"horizontal"}},"singleValue":{"showLabel":true,"label":"","prefixIcon":"","autoscale":true,"alignment":"center","colorThresholdTarget":"value","recordField":"database_id"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"columnWidths":{}},"unitsOverrides":[{"identifier":"read_ops_count","unitCategory":"unspecified","baseUnit":"count","displayUnit":"","decimals":0,"suffix":"","delimiter":false,"added":0,"id":"read_ops_count"}],"histogram":{"dataMappings":[{"valueAxis":"read_ops_count","rangeAxis":""}]},"honeycomb":{"shape":"square"}}},"38":{"type":"data","title":"Write OPS (avg)","query":"timeseries avg=avg(cloud.gcp.cloudsql_googleapis_com.database.disk.write_ops_count), by: { database_id }, filter:in(gcp.project.id, $gcp_project_id)\n| fields database_id, write_ops_count=arrayAvg(avg)\n| sort write_ops_count desc\n| limit toLong($top)","davis":{"enabled":false,"davisVisualization":{"isAvailable":true}},"visualization":"categoricalBarChart","visualizationSettings":{"thresholds":[{"id":"0","title":"","field":"read_ops_count","rules":[{"id":"0","label":"","comparator":"≥","color":"#7dc540"},{"id":"1","label":"","comparator":"≥","color":"#f5d30f"},{"id":"2","label":"","comparator":"≥","color":"#dc172a"}],"isEnabled":true}],"chartSettings":{"seriesOverrides":[],"gapPolicy":"gap","leftYAxisSettings":{"label":""},"categoricalBarChartSettings":{"categoryAxis":"database_id","categoryAxisLabel":"","valueAxis":"write_ops_count","valueAxisLabel":"","layout":"horizontal","colorPaletteMode":"multi-color"}},"singleValue":{"showLabel":true,"label":"","prefixIcon":"","autoscale":true,"alignment":"center","colorThresholdTarget":"value","recordField":"database_id"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"columnWidths":{}},"unitsOverrides":[{"identifier":"read_ops_count","unitCategory":"unspecified","baseUnit":"count","displayUnit":"","decimals":0,"suffix":"","delimiter":false,"added":0,"id":"read_ops_count"}],"histogram":{"dataMappings":[{"valueAxis":"write_ops_count","rangeAxis":""}]},"honeycomb":{"shape":"square"}}},"39":{"type":"data","title":"Write OPS (avg)","query":"timeseries write_ops_count=avg(cloud.gcp.cloudsql_googleapis_com.database.disk.write_ops_count), by: { database_id }, filter:in(gcp.project.id, $gcp_project_id)\n| sort arrayAvg(write_ops_count) desc\n| limit toLong($top)","davis":{"enabled":false,"davisVisualization":{"isAvailable":true}},"visualization":"lineChart","visualizationSettings":{"thresholds":[{"id":"0","title":"","field":"read_ops_count","rules":[{"id":"0","label":"","comparator":"≥","color":"#7dc540"},{"id":"1","label":"","comparator":"≥","color":"#f5d30f"},{"id":"2","label":"","comparator":"≥","color":"#dc172a"}],"isEnabled":true}],"chartSettings":{"seriesOverrides":[],"gapPolicy":"gap","legend":{"hidden":false},"leftYAxisSettings":{"label":""},"categoricalBarChartSettings":{"categoryAxis":"database_id","categoryAxisLabel":"database_id","valueAxis":"interval","valueAxisLabel":"interval"},"fieldMapping":{"timestamp":"timeframe","leftAxisValues":["write_ops_count"],"leftAxisDimensions":["database_id"],"fields":[],"values":[]},"hiddenLegendFields":["write_ops_count"]},"singleValue":{"showLabel":true,"label":"","prefixIcon":"","autoscale":true,"alignment":"center","colorThresholdTarget":"value","recordField":"database_id"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"columnWidths":{}},"unitsOverrides":[{"identifier":"read_ops_count","unitCategory":"unspecified","baseUnit":"count","displayUnit":"","decimals":0,"suffix":"","delimiter":false,"added":0,"id":"read_ops_count"}],"histogram":{"dataMappings":[{"valueAxis":"interval","rangeAxis":""}]},"honeycomb":{"shape":"square"}}},"40":{"type":"data","title":"Connections (avg)","query":"timeseries avg=avg(cloud.gcp.cloudsql_googleapis_com.database.network.connections), by: { database_id }, filter:in(gcp.project.id, $gcp_project_id)\n| fields database_id, connections=arrayAvg(avg)\n| sort connections desc\n| limit toLong($top)","davis":{"enabled":false,"davisVisualization":{"isAvailable":true}},"visualization":"categoricalBarChart","visualizationSettings":{"thresholds":[{"id":"0","title":"","field":"connections","rules":[{"id":"0","label":"","comparator":"≥","color":"#7dc540"},{"id":"1","label":"","comparator":"≥","color":"#f5d30f"},{"id":"2","label":"","comparator":"≥","color":"#dc172a"}],"isEnabled":true}],"chartSettings":{"seriesOverrides":[],"gapPolicy":"gap","leftYAxisSettings":{"label":""},"categoricalBarChartSettings":{"categoryAxis":"database_id","categoryAxisLabel":"","valueAxis":"connections","valueAxisLabel":"","layout":"horizontal"}},"singleValue":{"showLabel":true,"label":"","prefixIcon":"","autoscale":true,"alignment":"center","colorThresholdTarget":"value","recordField":"gcp.project.id"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"columnWidths":{}},"unitsOverrides":[{"identifier":"connections","unitCategory":"unspecified","baseUnit":"count","displayUnit":"","decimals":0,"suffix":"","delimiter":false,"added":0,"id":"connections"}],"histogram":{"dataMappings":[]},"honeycomb":{"shape":"square"}}},"41":{"type":"data","title":"","query":"timeseries sum=sum(cloud.gcp.cloudsql_googleapis_com.database.available_for_failover), by:{ database_id, gcp.project.id,backend_name }, filter:in(gcp.project.id, $gcp_project_id)\n| summarize failover_count=sum(arrayMax(sum))\n","davis":{"enabled":false,"davisVisualization":{"isAvailable":true}},"visualization":"singleValue","visualizationSettings":{"thresholds":[{"id":"0","title":"","field":"available_for_failover","rules":[{"id":"0","label":"","comparator":"≥","color":"#7dc540"},{"id":"1","label":"","comparator":"≥","color":"#f5d30f"},{"id":"2","label":"","comparator":"≥","color":"#dc172a"}],"isEnabled":true}],"chartSettings":{"categoricalBarChartSettings":{"valueAxisLabel":"available_for_failover","layout":"horizontal","categoryAxisLabel":"database_id"}},"singleValue":{"showLabel":true,"label":"","prefixIcon":"","autoscale":true,"alignment":"center","colorThresholdTarget":"value","recordField":"failover_count"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"columnWidths":{}},"unitsOverrides":[{"identifier":"available_for_failover","unitCategory":"unspecified","baseUnit":"count","displayUnit":"","decimals":0,"suffix":"","delimiter":false,"added":0,"id":"available_for_failover"}],"histogram":{"dataMappings":[{"valueAxis":"failover_count","rangeAxis":""}]},"honeycomb":{"shape":"square"}}},"42":{"type":"data","title":"Servers available for failover (sum)","query":"timeseries sum=sum(cloud.gcp.cloudsql_googleapis_com.database.available_for_failover), by:{ database_id, gcp.project.id,backend_name }, filter:in(gcp.project.id, $gcp_project_id)\n| fields database_id, failover_count=arraySum(sum)\n| sort failover_count desc\n| limit toLong($top)\n","davis":{"enabled":false,"davisVisualization":{"isAvailable":true}},"visualization":"categoricalBarChart","visualizationSettings":{"thresholds":[{"id":"0","title":"","field":"available_for_failover","rules":[{"id":"0","label":"","comparator":"≥","color":"#7dc540"},{"id":"1","label":"","comparator":"≥","color":"#f5d30f"},{"id":"2","label":"","comparator":"≥","color":"#dc172a"}],"isEnabled":true}],"chartSettings":{"categoricalBarChartSettings":{"valueAxisLabel":"","valueAxis":"failover_count","layout":"horizontal","categoryAxis":"database_id","categoryAxisLabel":""}},"singleValue":{"showLabel":true,"label":"","prefixIcon":"","autoscale":true,"alignment":"center","colorThresholdTarget":"value","recordField":"up"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"columnWidths":{}},"unitsOverrides":[{"identifier":"available_for_failover","unitCategory":"unspecified","baseUnit":"count","displayUnit":"","decimals":0,"suffix":"","delimiter":false,"added":0,"id":"available_for_failover"}],"histogram":{"dataMappings":[]},"honeycomb":{"shape":"square"}}},"43":{"type":"data","title":"SQL servers","query":"timeseries{ cpu.utilization=avg(`cloud.gcp.cloudsql_googleapis_com.database.cpu.utilization`)\n  }, \n  by:{database_id, gcp.project.id, `dt.entity.cloud:gcp:project`,`dt.entity.cloud:gcp:cloudsql_database`}, filter:in(gcp.project.id, $gcp_project_id)\n|filter database_id!=\"\"\n|fields  gcp.project.id, `dt.entity.cloud:gcp:project`, database_id, `dt.entity.cloud:gcp:cloudsql_database`, `cpu.utilization %`=arrayAvg(cpu.utilization)|sort `cpu.utilization %` desc\n|limit toLong($top)\n","davis":{"enabled":false,"davisVisualization":{"isAvailable":true}},"visualization":"table","visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"categoricalBarChartSettings":{"categoryAxis":"gcp.project.id","categoryAxisLabel":"gcp.project.id","valueAxis":"cpu.utilization %","valueAxisLabel":"cpu.utilization %"}},"singleValue":{"showLabel":true,"label":"","prefixIcon":"","recordField":"gcp.project.id","autoscale":true,"alignment":"center","colorThresholdTarget":"value"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[["dt.entity.cloud:gcp:cloudsql_database"],["dt.entity.cloud:gcp:project"]],"lineWrapIds":[],"columnWidths":{"[\"memory.utilization (1=100%)\"]":231.6125030517578},"colorThresholdTarget":"value"},"histogram":{"dataMappings":[{"valueAxis":"cpu.utilization %","rangeAxis":""}]},"honeycomb":{"shape":"square"}}},"44":{"type":"markdown","title":"","content":"\n## Availability"},"45":{"type":"markdown","title":"","content":"Cloud SQL is a fully managed relational database service for MySQL, PostgreSQL, and SQL Server.\n\n\nGCP metrics are filtered by `gcp_project_id`, splitted by some dimension(s) and aggregated by \n- `sum` = sum of period and the other dimensions (example `count`), or\n- `avg` = average over the period and over the other dimensions (example `latency`)."}},"layouts":{"0":{"x":0,"y":0,"w":12,"h":2},"1":{"x":0,"y":9,"w":24,"h":1},"2":{"x":0,"y":16,"w":24,"h":1},"3":{"x":12,"y":29,"w":12,"h":1},"4":{"x":0,"y":3,"w":12,"h":1},"5":{"x":12,"y":3,"w":6,"h":1},"6":{"x":18,"y":3,"w":6,"h":1},"7":{"x":0,"y":35,"w":24,"h":2},"9":{"x":0,"y":10,"w":12,"h":1},"10":{"x":12,"y":10,"w":12,"h":1},"11":{"x":0,"y":17,"w":12,"h":1},"12":{"x":12,"y":17,"w":12,"h":1},"13":{"x":0,"y":23,"w":12,"h":1},"15":{"x":0,"y":29,"w":12,"h":1},"16":{"x":12,"y":23,"w":11,"h":1},"19":{"x":6,"y":4,"w":6,"h":5},"23":{"x":0,"y":4,"w":3,"h":5},"24":{"x":3,"y":4,"w":3,"h":5},"25":{"x":12,"y":4,"w":6,"h":5},"26":{"x":18,"y":4,"w":6,"h":5},"27":{"x":6,"y":11,"w":6,"h":5},"28":{"x":18,"y":11,"w":6,"h":5},"29":{"x":12,"y":11,"w":6,"h":5},"30":{"x":6,"y":18,"w":6,"h":5},"31":{"x":0,"y":18,"w":6,"h":5},"32":{"x":18,"y":18,"w":6,"h":5},"33":{"x":12,"y":18,"w":6,"h":5},"34":{"x":0,"y":24,"w":6,"h":5},"35":{"x":6,"y":24,"w":6,"h":5},"36":{"x":6,"y":30,"w":6,"h":5},"37":{"x":0,"y":30,"w":6,"h":5},"38":{"x":12,"y":24,"w":6,"h":5},"39":{"x":18,"y":24,"w":6,"h":5},"40":{"x":0,"y":11,"w":6,"h":5},"41":{"x":12,"y":30,"w":6,"h":5},"42":{"x":18,"y":30,"w":6,"h":5},"43":{"x":0,"y":37,"w":12,"h":6},"44":{"x":0,"y":2,"w":12,"h":1},"45":{"x":12,"y":0,"w":12,"h":3}}}