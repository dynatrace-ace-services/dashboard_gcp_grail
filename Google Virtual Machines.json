{"version":13,"variables":[{"key":"gcp_project_id","type":"query","input":"timeseries count(cloud.gcp.compute_googleapis_com.instance.cpu.utilization), by:{ gcp.project.id }\n| summarize filestore=count(), by: {gcp.project.id}\n| sort filestore desc\n| fields gcp.project.id","multiple":true},{"key":"top","type":"csv","input":"5, 10, 20 , 50, 100, 500","multiple":false}],"tiles":{"0":{"type":"data","title":"VM","query":"timeseries count(cloud.gcp.compute_googleapis_com.instance.cpu.utilization), by:{ gcp.instance.id},filter:in(gcp.project.id,  $gcp_project_id)\n| summarize count=count(), by: { gcp.instance.id }\n| summarize `gcp.instance.id`=sum(count)\n","davis":{"enabled":false,"davisVisualization":{"isAvailable":true}},"visualization":"singleValue","visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"connect","categoricalBarChartSettings":{}},"singleValue":{"alignment":"center","label":"","recordField":"gcp.instance.id","autoscale":true},"table":{"hiddenColumns":[],"lineWrapIds":[]},"unitsOverrides":[{"identifier":"gcp.instance.id","unitCategory":"amount","baseUnit":"one","displayUnit":null,"decimals":0,"suffix":"","delimiter":false,"added":1709634878209}],"histogram":{"dataMappings":[{"valueAxis":"gcp.instance.id","rangeAxis":""}]},"honeycomb":{"shape":"square"}}},"1":{"type":"data","title":"GCP project id","query":"timeseries count(cloud.gcp.compute_googleapis_com.instance.cpu.utilization), by:{ gcp.project.id},filter:in(gcp.project.id,  $gcp_project_id)\n| summarize count=count(), by: {gcp.project.id}\n| summarize `gcp.project.id`=sum(count)","davis":{"enabled":false,"davisVisualization":{"isAvailable":true}},"visualization":"singleValue","visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"connect","categoricalBarChartSettings":{"categoryAxisLabel":"gcp.project.id","valueAxisLabel":"interval"}},"singleValue":{"alignment":"center","label":"","recordField":"gcp.project.id","autoscale":true},"table":{"hiddenColumns":[],"lineWrapIds":[]},"unitsOverrides":[{"identifier":"gcp.project.id","unitCategory":"unspecified","baseUnit":"none","displayUnit":null,"decimals":0,"suffix":"","delimiter":true,"added":1709634878209}],"histogram":{"dataMappings":[{"valueAxis":"gcp.project.id","rangeAxis":""}]},"honeycomb":{"shape":"square"}}},"2":{"type":"data","title":"VM by GCP project ID","query":"timeseries count(cloud.gcp.compute_googleapis_com.instance.cpu.utilization), by:{ gcp.project.id, gcp.instance.id }, filter:in(gcp.project.id,  $gcp_project_id)\n| summarize vm=count(), by: {gcp.project.id}\n| sort vm desc\n| limit toLong($top)","davis":{"enabled":false,"davisVisualization":{"isAvailable":true}},"visualization":"pieChart","visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"connect","categoricalBarChartSettings":{"categoryAxis":"gcp.project.id","valueAxis":"vm","categoryAxisLabel":"gcp.project.id","valueAxisLabel":"vm","layout":"horizontal"},"circleChartSettings":{"valueType":"absolute","groupingThresholdType":"number-of-slices","hideLabels":false,"groupingThresholdValue":50,"groupingName":"others"},"legend":{"position":"right","hidden":false}},"singleValue":{"alignment":"center","label":"","recordField":"gcp.project.id last 15 min","autoscale":true},"table":{"hiddenColumns":[],"lineWrapIds":[],"sortBy":{"columnId":"[\"vm\"]","direction":"descending"}},"unitsOverrides":[{"identifier":"VM last value","unitCategory":"unspecified","baseUnit":"none","displayUnit":null,"decimals":2,"suffix":"","delimiter":true,"added":1709634878209}],"histogram":{"dataMappings":[{"valueAxis":"vm","rangeAxis":""}]},"honeycomb":{"shape":"square"}}},"4":{"type":"data","title":"VM by availability zone","query":"timeseries count(cloud.gcp.compute_googleapis_com.instance.cpu.utilization), by:{ gcp.region, gcp.instance.id  }, filter:in(gcp.project.id,  $gcp_project_id)\n| summarize gcp.region.id=count(), by: {gcp.region}\n| sort gcp.region.id desc\n| limit toLong($top)","davis":{"enabled":false,"davisVisualization":{"isAvailable":true}},"visualization":"pieChart","visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"connect","categoricalBarChartSettings":{"categoryAxis":"gcp.region","valueAxis":"gcp.region.id","categoryAxisLabel":"gcp.region","valueAxisLabel":"gcp.region.id"},"circleChartSettings":{"valueType":"absolute","groupingThresholdType":"number-of-slices","hideLabels":false,"groupingThresholdValue":50,"groupingName":"others"},"legend":{"position":"right","hidden":false}},"singleValue":{"alignment":"center","label":"","recordField":"gcp.project.id last 15 min","autoscale":true},"table":{"hiddenColumns":[],"lineWrapIds":[],"sortBy":{"columnId":"[\"project.id\"]","direction":"descending"}},"unitsOverrides":[{"identifier":"VM last value","unitCategory":"unspecified","baseUnit":"none","displayUnit":null,"decimals":2,"suffix":"","delimiter":true,"added":1709634878209}],"histogram":{"dataMappings":[{"valueAxis":"gcp.region.id","rangeAxis":""}]},"honeycomb":{"shape":"square"}}},"5":{"type":"data","title":"CPU utilization (top)","query":"timeseries cpu=avg(cloud.gcp.compute_googleapis_com.instance.cpu.utilization), by:{ gcp.instance.name}, filter:in(gcp.project.id,  $gcp_project_id)\n|sort arrayAvg(cpu) desc\n| limit toLong($top)","davis":{"enabled":false,"davisVisualization":{"isAvailable":true}},"visualization":"lineChart","visualizationSettings":{"thresholds":[{"id":1,"field":"","title":"","isEnabled":true,"rules":[{"id":0,"color":{"Default":"var(--dt-colors-charts-categorical-color-09-default, #649438)"},"comparator":"≥","label":"","value":0},{"id":1,"color":{"Default":"var(--dt-colors-charts-categorical-color-14-default, #d56b1a)"},"comparator":"≥","label":"","value":80},{"id":2,"color":{"Default":"var(--dt-colors-charts-categorical-color-12-default, #cd3741)"},"comparator":"≥","label":"","value":90}]}],"chartSettings":{"gapPolicy":"connect","categoricalBarChartSettings":{"categoryAxis":"gcp.instance.name","valueAxis":"interval","categoryAxisLabel":"gcp.instance.name","valueAxisLabel":"interval"},"fieldMapping":{"timestamp":"timeframe","leftAxisValues":["cpu"],"leftAxisDimensions":["gcp.instance.name"],"fields":[],"values":[]},"circleChartSettings":{"valueType":"absolute","groupingThresholdType":"number-of-slices","hideLabels":false,"groupingThresholdValue":10,"groupingName":"others"},"legend":{"position":"right","hidden":false}},"singleValue":{"alignment":"center","label":"","recordField":"gcp.project.id last 15 min","autoscale":true},"table":{"hiddenColumns":[],"lineWrapIds":[],"sortBy":{"columnId":"[\"project.id\"]","direction":"descending"}},"unitsOverrides":[{"identifier":"VM last value","unitCategory":"unspecified","baseUnit":"none","displayUnit":null,"decimals":2,"suffix":"","delimiter":true,"added":1709634878209}],"histogram":{"dataMappings":[{"valueAxis":"interval","rangeAxis":""}]},"honeycomb":{"shape":"square"}}},"8":{"type":"data","title":"VM by CPU (avg)","query":"timeseries cpu=avg(cloud.gcp.compute_googleapis_com.instance.cpu.utilization),by:{ gcp.instance.id}, filter:in(gcp.project.id,  $gcp_project_id)\n| summarize `sup 90%`=countif(arrayAvg(cpu) >= 90), `80% - 90%`=countif(arrayAvg(cpu) > 80 and arrayAvg(cpu) < 90), `inf 80%`=countif(arrayAvg(cpu) <= 80)\n| fields  `sup 90%`, `80% - 90%`, `inf 80%`","davis":{"enabled":false,"davisVisualization":{"isAvailable":true}},"visualization":"table","visualizationSettings":{"thresholds":[{"id":1,"field":"","title":"","isEnabled":true,"rules":[{"id":0,"color":{"Default":"var(--dt-colors-charts-categorical-color-09-default, #649438)"},"comparator":"≥","label":"","value":0},{"id":1,"color":{"Default":"var(--dt-colors-charts-categorical-color-14-default, #d56b1a)"},"comparator":"≥","label":"","value":80},{"id":2,"color":{"Default":"var(--dt-colors-charts-categorical-color-12-default, #cd3741)"},"comparator":"≥","label":"","value":90}]}],"chartSettings":{"gapPolicy":"connect","categoricalBarChartSettings":{"categoryAxisLabel":"gcp.instance.name","valueAxisLabel":"sup90%"},"circleChartSettings":{"valueType":"absolute","groupingThresholdType":"number-of-slices","hideLabels":false,"groupingThresholdValue":10,"groupingName":"others"},"legend":{"position":"right","hidden":false}},"singleValue":{"alignment":"center","label":"","recordField":"gcp.project.id last 15 min","autoscale":true},"table":{"hiddenColumns":[],"lineWrapIds":[],"sortBy":{"columnId":"[\"95%\"]","direction":"descending"},"colorThresholdTarget":"background","enableSparklines":false,"rowDensity":"comfortable"},"unitsOverrides":[{"identifier":"inf80%","unitCategory":"amount","baseUnit":"one","displayUnit":null,"decimals":0,"suffix":"","delimiter":false,"added":1709634878209}],"histogram":{"dataMappings":[{"valueAxis":"sup 90%","rangeAxis":""},{"valueAxis":"80% - 90%","rangeAxis":""},{"valueAxis":"inf 80%","rangeAxis":""}]},"honeycomb":{"shape":"square"}}},"9":{"type":"data","title":"VM by CPU (max)","query":"timeseries cpu=avg(cloud.gcp.compute_googleapis_com.instance.cpu.utilization), by:{gcp.instance.id}, filter:in(gcp.project.id,  $gcp_project_id)\n| summarize `sup 90%`=countif(arrayMax(cpu) >= 90), `80% - 90%`=countif(arrayMax(cpu) > 80 and arrayMax(cpu) < 90), `inf 80%`=countif(arrayMax(cpu) <= 80)\n| fields  `sup 90%`, `80% - 90%`, `inf 80%`","davis":{"enabled":false,"davisVisualization":{"isAvailable":true}},"visualization":"table","visualizationSettings":{"thresholds":[{"id":1,"field":"","title":"","isEnabled":true,"rules":[{"id":0,"color":{"Default":"var(--dt-colors-charts-categorical-color-09-default, #649438)"},"comparator":"≥","label":"","value":0},{"id":1,"color":{"Default":"var(--dt-colors-charts-categorical-color-14-default, #d56b1a)"},"comparator":"≥","label":"","value":80},{"id":2,"color":{"Default":"var(--dt-colors-charts-categorical-color-12-default, #cd3741)"},"comparator":"≥","label":"","value":90}]}],"chartSettings":{"gapPolicy":"connect","categoricalBarChartSettings":{"categoryAxisLabel":"gcp.instance.name","valueAxisLabel":"sup90%"},"circleChartSettings":{"valueType":"absolute","groupingThresholdType":"number-of-slices","hideLabels":false,"groupingThresholdValue":10,"groupingName":"others"},"legend":{"position":"right","hidden":false}},"singleValue":{"alignment":"center","label":"","recordField":"gcp.project.id last 15 min","autoscale":true},"table":{"hiddenColumns":[],"lineWrapIds":[],"sortBy":{"columnId":"[\"95%\"]","direction":"descending"},"colorThresholdTarget":"background","enableSparklines":false,"rowDensity":"comfortable"},"unitsOverrides":[{"identifier":"inf80%","unitCategory":"amount","baseUnit":"one","displayUnit":null,"decimals":0,"suffix":"","delimiter":false,"added":1709634878209}],"histogram":{"dataMappings":[{"valueAxis":"sup 90%","rangeAxis":""},{"valueAxis":"80% - 90%","rangeAxis":""},{"valueAxis":"inf 80%","rangeAxis":""}]},"honeycomb":{"shape":"square"}}},"10":{"type":"data","title":"Sent bytes (top )","query":"timeseries sentbytes=avg(cloud.gcp.compute_googleapis_com.instance.network.sent_bytes_count), by:{ gcp.instance.name}, filter:in(gcp.project.id,  $gcp_project_id)\n|sort arrayAvg(sentbytes) desc\n| limit toLong($top)","davis":{"enabled":false,"davisVisualization":{"isAvailable":true}},"visualization":"lineChart","visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"connect","categoricalBarChartSettings":{"categoryAxis":"gcp.instance.name","valueAxis":"interval","categoryAxisLabel":"gcp.instance.name","valueAxisLabel":"interval"},"fieldMapping":{"timestamp":"timeframe","leftAxisValues":["sentbytes"],"leftAxisDimensions":["gcp.instance.name"],"fields":[],"values":[]},"circleChartSettings":{"valueType":"absolute","groupingThresholdType":"number-of-slices","hideLabels":false,"groupingThresholdValue":10,"groupingName":"others"},"legend":{"position":"right","hidden":false}},"singleValue":{"alignment":"center","label":"","recordField":"gcp.project.id last 15 min","autoscale":true},"table":{"hiddenColumns":[],"lineWrapIds":[],"sortBy":{"columnId":"[\"project.id\"]","direction":"descending"}},"unitsOverrides":[{"identifier":"VM last value","unitCategory":"unspecified","baseUnit":"none","displayUnit":null,"decimals":2,"suffix":"","delimiter":true,"added":1709634878209}],"histogram":{"dataMappings":[{"valueAxis":"interval","rangeAxis":""}]},"honeycomb":{"shape":"square"}}},"11":{"type":"data","title":"Received bytes (top)","query":"timeseries receivebytes=avg(cloud.gcp.compute_googleapis_com.instance.network.received_bytes_count), by:{ gcp.instance.name}, filter:in(gcp.project.id,  $gcp_project_id)\n|sort arrayAvg(receivebytes) desc\n| limit toLong($top)","davis":{"enabled":false,"davisVisualization":{"isAvailable":true}},"visualization":"lineChart","visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"connect","categoricalBarChartSettings":{"categoryAxis":"gcp.instance.name","valueAxis":"interval","categoryAxisLabel":"gcp.instance.name","valueAxisLabel":"interval"},"fieldMapping":{"timestamp":"timeframe","leftAxisValues":["receivebytes"],"leftAxisDimensions":["gcp.instance.name"],"fields":[],"values":[]},"circleChartSettings":{"valueType":"absolute","groupingThresholdType":"number-of-slices","hideLabels":false,"groupingThresholdValue":10,"groupingName":"others"},"legend":{"position":"right","hidden":false}},"singleValue":{"alignment":"center","label":"","recordField":"gcp.project.id last 15 min","autoscale":true},"table":{"hiddenColumns":[],"lineWrapIds":[],"sortBy":{"columnId":"[\"project.id\"]","direction":"descending"}},"unitsOverrides":[{"identifier":"VM last value","unitCategory":"unspecified","baseUnit":"none","displayUnit":null,"decimals":2,"suffix":"","delimiter":true,"added":1709634878209}],"histogram":{"dataMappings":[{"valueAxis":"interval","rangeAxis":""}]},"honeycomb":{"shape":"square"}}},"12":{"type":"data","title":"VM","query":"timeseries cpu=avg(cloud.gcp.compute_googleapis_com.instance.cpu.utilization), by:{ gcp.instance.name, `dt.entity.cloud:gcp:gce_instance`, `dt.entity.cloud:gcp:project` }, filter:in(gcp.project.id,  $gcp_project_id)\n|fields  gcp.instance.name, `cpu %`=arrayAvg(cpu), `dt.entity.cloud:gcp:gce_instance`\n|sort `cpu %` desc\n| limit toLong($top)","davis":{"enabled":false,"davisVisualization":{"isAvailable":true}},"visualization":"table","visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"connect","categoricalBarChartSettings":{"categoryAxis":"gcp.instance.name","valueAxis":"cpu %","categoryAxisLabel":"gcp.instance.name","valueAxisLabel":"cpu %"},"circleChartSettings":{"valueType":"absolute","groupingThresholdType":"number-of-slices","hideLabels":false,"groupingThresholdValue":10,"groupingName":"others"},"legend":{"position":"right","hidden":false}},"singleValue":{"alignment":"center","label":"","recordField":"gcp.project.id last 15 min","autoscale":true},"table":{"hiddenColumns":[["dt.entity.cloud:gcp:gce_instance"]],"lineWrapIds":[],"sortBy":{"columnId":"[\"project.id\"]","direction":"descending"}},"unitsOverrides":[{"identifier":"VM last value","unitCategory":"unspecified","baseUnit":"none","displayUnit":null,"decimals":2,"suffix":"","delimiter":true,"added":1709634878209}],"histogram":{"dataMappings":[{"valueAxis":"cpu %","rangeAxis":""}]},"honeycomb":{"shape":"square"}}},"13":{"type":"data","title":"VM by gcp.project.id","query":"timeseries vm=count(cloud.gcp.compute_googleapis_com.instance.cpu.utilization), by:{ gcp.project.id, `dt.entity.cloud:gcp:project`, gcp.instance.id }, filter:in(gcp.project.id,  $gcp_project_id)\n| summarize vm=count(), by: {gcp.project.id, `dt.entity.cloud:gcp:project`}\n| fields gcp.project.id, vm, `dt.entity.cloud:gcp:project`\n| sort vm desc\n| limit toLong($top)","davis":{"enabled":false,"davisVisualization":{"isAvailable":true}},"visualization":"table","visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"connect","categoricalBarChartSettings":{"categoryAxis":"gcp.project.id","valueAxis":"vm","categoryAxisLabel":"gcp.project.id","valueAxisLabel":"vm"},"circleChartSettings":{"valueType":"absolute","groupingThresholdType":"number-of-slices","hideLabels":false,"groupingThresholdValue":10,"groupingName":"others"},"legend":{"position":"right","hidden":false}},"singleValue":{"alignment":"center","label":"","recordField":"gcp.project.id last 15 min","autoscale":true},"table":{"hiddenColumns":[["dt.entity.cloud:gcp:project"]],"lineWrapIds":[],"sortBy":{"columnId":"[\"project.id\"]","direction":"descending"}},"unitsOverrides":[{"identifier":"VM last value","unitCategory":"unspecified","baseUnit":"none","displayUnit":null,"decimals":2,"suffix":"","delimiter":true,"added":1709634878209}],"histogram":{"dataMappings":[{"valueAxis":"vm","rangeAxis":""}]},"honeycomb":{"shape":"square"}}},"14":{"type":"markdown","title":"","content":"# Google Virtual Machines\n## Usage"},"15":{"type":"markdown","title":"","content":"## Link\nclick on `gcp.project.id` or on `gcp.instance.name` + **[↗] Open with** + **Cloud**"}},"layouts":{"0":{"x":0,"y":3,"w":4,"h":5},"1":{"x":4,"y":3,"w":4,"h":5},"2":{"x":8,"y":3,"w":8,"h":5},"4":{"x":16,"y":3,"w":8,"h":5},"5":{"x":7,"y":8,"w":17,"h":8},"8":{"x":0,"y":12,"w":7,"h":4},"9":{"x":0,"y":8,"w":7,"h":4},"10":{"x":0,"y":16,"w":12,"h":7},"11":{"x":12,"y":16,"w":12,"h":7},"12":{"x":12,"y":25,"w":12,"h":5},"13":{"x":0,"y":25,"w":12,"h":5},"14":{"x":0,"y":0,"w":24,"h":3},"15":{"x":0,"y":23,"w":24,"h":2}},"refreshRate":0}